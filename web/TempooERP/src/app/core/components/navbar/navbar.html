<aside class="h-screen bg-white border-r flex flex-col transition-all duration-300 ease-in-out"
  [class.w-64]="!collapsed()" [class.w-20]="collapsed()">
  <!-- Logo -->
  <div class="h-16 flex items-center border-b px-4">
    @if (!collapsed()) {
    <span class="text-xl font-semibold tracking-tight">TempooERP</span>
    } @else {
    <span class="text-2xl font-bold mx-auto">T</span>
    }
  </div>

  <!-- Nav -->
  <nav class="flex-1 px-2 py-4 space-y-1">
    @for (item of items; track item.label) {
    @if (!item.children) {
    <!-- Item simple -->
    <a [routerLink]="item.route" routerLinkActive="bg-blue-50 text-blue-600 border-l-4 border-blue-600"
      class="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-slate-700 hover:bg-slate-100 hover:text-slate-900 transition">
      <span>{{ item.icon }}</span>
      @if (!collapsed()) {
      <span class="whitespace-nowrap">{{ item.label }}</span>
      }
    </a>
    } @else {
    <!-- Grupo con hijos (ej: Catalog) -->
    <div>
      <!-- Cabecera grupo -->
      <button type="button" (click)="!collapsed() && toggleCatalog()"
        class="w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-semibold text-slate-700 hover:bg-slate-100 transition">
        <span>{{ item.icon }}</span>

        @if (!collapsed()) {
        <span class="flex-1 text-left whitespace-nowrap">
          {{ item.label }}
        </span>

        <span class="text-xs transition-transform" [class.rotate-90]="openCatalog()">
          ‚ñ∂
        </span>
        }
      </button>

      <!-- Hijos -->
      @if (!collapsed() && openCatalog()) {
      <div class="mt-1 ml-7 space-y-1">
        @for (child of item.children; track child.route) {
        <a [routerLink]="child.route" routerLinkActive="text-blue-600"
          class="block text-xs text-slate-600 hover:text-slate-900 transition">
          {{ child.label }}
        </a>
        }
      </div>
      }
    </div>
    }
    }
  </nav>

  <!-- Backend status -->
  <div class="px-3 py-3 border-t text-[10px] text-slate-600">
    @switch (backendOk()) {
    @case (null) {
    <div class="flex items-center gap-2">
      <span>üîÑ</span>
      @if (!collapsed()) { <span>Comprobando API...</span> }
    </div>
    }
    @case (true) {
    <div class="flex items-center gap-2 text-green-600 font-semibold">
      <span>‚úÖ</span>
      @if (!collapsed()) { <span>API OK</span> }
    </div>
    }
    @case (false) {
    <div class="flex items-center gap-2 text-red-600 font-semibold">
      <span>‚ùå</span>
      @if (!collapsed()) { <span>API ca√≠da</span> }
    </div>
    }
    }
  </div>
</aside>
